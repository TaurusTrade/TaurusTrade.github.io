
# 查询

vnpy: 异步
```
    def query_account(self)


    accountid: str
    balance: float = 0
    frozen: float = 0    
```

## 金证

- 2.2.6 获取资金

```
[函数原型]
/**
* 取操作员的资金
* @param[in] nAssetID 资产单元ID(0-表示当前用户的所有资产单元)
* @return return 0: 成功，其它：错误码
*/
  int GetFunds(int nAssetID);
[参数]
参数  参数含义  参数说明  参数类型  是否必填
nAssetID  资产单元ID  0表示查所有的资产单元 输入参数  是

[返回值]
0表示成功，非0表示失败
[示例]
 m_pLBMPlugin->GetFunds(1);
%这里的资产单元ID需是操作员所属的股票，后述请求中资产单元ID的赋值同样的原则

调用前需设置资金回调函数，才能在回调函数中获取异步请求返回的数据，函数原型：
/**
* 设置资金回调函数
* @param[in] hWnd句柄
* @param[in] pFundFun 资金回调函数
*/
  void SetCallBackFund(HWND hWnd, CALLBACK_FUND pFundFun);
[参数]
参数  参数含义  参数说明  参数类型  是否必填
hWnd  窗口句柄    输入参数  是
pFundFun  资金回调函数    输入参数  是
[返回值]
无
[示例]
 m_pLBMPlugin->SetCallBackFund(this->GetSafeHwnd(), OnFund);


/** 资产单元资金查询结果 */
struct ASSET_FUND
{
  int nProjectId;              //!< 项目ID
  char szProjectName[64 + 1];  //!< 项目名称
  int nAssetId;                //!< 资产单元ID
  char szAssetName[64 + 1];    //!< 资产单元名称
  short siIntOrg;              //!< 内部机构
  char chCurrency[1 + 1];      //!< 货币代码
  double dMaxMoney;            //!< 资金上限
  double dMinMoney;            //!< 资金下限
  double dFundPrebln;          //!< 资金昨日余额
  double dFundBln;             //!< 资金当前余额
  double dFundAvl;             //!< 资金可用金额
  double dFundFrz;             //!< 资金冻结金额
  double dFundUfz;             //!< 资金解冻金额
  double dFundTrdFrz;          //!< 资金交易冻结金额
  double dFundTrdUfz;          //!< 资金交易解冻金额
  double dFundTrdOtd;          //!< 资金交易在途金额
  double dFundTrdBln;          //!< 资金交易轧差金额
  double dFundClrFrz;          //!< 资金清算冻结金额
  double dFundClrUfz;          //!< 资金清算解冻金额
  double dFundClrOtd;          //!< 资金清算在途金额
  double dFundClrCtf;          //!< 资金清算保付金额
  double dFundTrnFrz;          //!< 资金转帐冻结金额
  double dFundTrnUfz;          //!< 资金转账解冻金额
  double dFundDebt;            //!< 资金负债金额
  double dFundCredit;          //!< 资金债权金额
  short siIntRateSn;           //!< 利率编码
  short siDrRateSn;            //!< 负债利率编码
  double dIntCalBln;           //!< 计息余额
  double dIntBlnAccu;          //!< 利息积数
  int iIntCalDate;             //!< 计息日期
  double dInterest;            //!< 利息
  double dIntTax;              //!< 利息税
  double dDrInt;               //!< 负债利息
  double dMktVal;              //!< 市值
  double dCashAccu;            //!< 现金积数
  double dChequeAccu;          //!< 支票积数
  double dLastFundClr;         //!< 上次清算金额
  double dLwlmtFund;           //!< 资金下限
  double dLwlmtAsset;          //!< 资产下限
  char szUpdTime[32 + 1];      //!< 修改时间
  char chFundStatus[1 + 1];    //!< 资金状态
  char szMac[255 + 1];         //!< 校验码    fengwc 0121 alter
  double dPaylater;            //!< 垫付资金
};
```


- 查资金(同步)

```
[函数原型]
  /**
  *资金信息查询
  * @param[in] iAssetId 资产单元ID
  * @param[out] pstAssetFund 资金信息
  * @return 调用LBM成功或失败
  */
  int GetAssetFund(int iAssetId, ASSET_FUND* pstAssetFund); 
[参数]
参数	参数含义	参数说明	参数类型	是否必填
iAssetId	资产单元ID		输入参数	是
pstAssetFund	证券基础信息		输出参数	是

[返回值]
0表示成功，非0表示失败
[示例]  
  int iRet = m_pLBM->GetAssetFund(iAssetId, &stStkInfo);
  if (iRet != RTMSG_OK)
  {
    str = m_pLBM->GetLastError(1);
    AfxMessageBox(str);
}


/** 资产单元资金查询结果 */
struct ASSET_FUND
{
  int nProjectId;              //!< 项目ID
  char szProjectName[64 + 1];  //!< 项目名称
  int nAssetId;                //!< 资产单元ID
  char szAssetName[64 + 1];    //!< 资产单元名称
  short siIntOrg;              //!< 内部机构
  char chCurrency[1 + 1];      //!< 货币代码
  double dMaxMoney;            //!< 资金上限
  double dMinMoney;            //!< 资金下限
  double dFundPrebln;          //!< 资金昨日余额
  double dFundBln;             //!< 资金当前余额
  double dFundAvl;             //!< 资金可用金额
  double dFundFrz;             //!< 资金冻结金额
  double dFundUfz;             //!< 资金解冻金额
  double dFundTrdFrz;          //!< 资金交易冻结金额
  double dFundTrdUfz;          //!< 资金交易解冻金额
  double dFundTrdOtd;          //!< 资金交易在途金额
  double dFundTrdBln;          //!< 资金交易轧差金额
  double dFundClrFrz;          //!< 资金清算冻结金额
  double dFundClrUfz;          //!< 资金清算解冻金额
  double dFundClrOtd;          //!< 资金清算在途金额
  double dFundClrCtf;          //!< 资金清算保付金额
  double dFundTrnFrz;          //!< 资金转帐冻结金额
  double dFundTrnUfz;          //!< 资金转账解冻金额
  double dFundDebt;            //!< 资金负债金额
  double dFundCredit;          //!< 资金债权金额
  short siIntRateSn;           //!< 利率编码
  short siDrRateSn;            //!< 负债利率编码
  double dIntCalBln;           //!< 计息余额
  double dIntBlnAccu;          //!< 利息积数
  int iIntCalDate;             //!< 计息日期
  double dInterest;            //!< 利息
  double dIntTax;              //!< 利息税
  double dDrInt;               //!< 负债利息
  double dMktVal;              //!< 市值
  double dCashAccu;            //!< 现金积数
  double dChequeAccu;          //!< 支票积数
  double dLastFundClr;         //!< 上次清算金额
  double dLwlmtFund;           //!< 资金下限
  double dLwlmtAsset;          //!< 资产下限
  char szUpdTime[32 + 1];      //!< 修改时间
  char chFundStatus[1 + 1];    //!< 资金状态
  char szMac[255 + 1];         //!< 校验码    fengwc 0121 alter
  double dPaylater;            //!< 垫付资金
};

```


## 恒生

```
功能号 34001 老功能号  35004 更新日期  20140911
功能名称  账户资金查询  版本号 20141111  结果集返回 Y
英文名 func_am_combofund_qry     请求类型  请求
业务范围  证券      功能状态  公开
功能描述  支持查询沪深A股及股转市场资金账户的资金可用，支持批量传入。        
输入参数  参数名 类型  说明  必须  备注
  user_token  C512  令牌号 Y 取登陆成功返回的令牌号。
  account_code  C32 账户编号  N 
  asset_no  C32 资产单元编号  N 
  combi_no  C16 组合编号  N 资产单元组合二选一必传，如果传入的组合或资产单元不能确定唯一组合或资产单元，则返回错误。
输出参数  参数名 类型  说明  操作符 备注
  account_code  C32 账户编号    
  asset_no  C32 资产单元编号    
  enable_balance_t0 N16.2 T+0可用资金   交易所T+0业务（如债券买入）可用资金
  enable_balance_t1 N16.2 T+1可用资金   交易所T+1业务（如股票买入）可用资金
  current_balance N16.2 当前资金余额    该余额不包含期货保证金
```


## 根网

