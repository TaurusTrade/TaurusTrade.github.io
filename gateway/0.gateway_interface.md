Gateways (and Strategies) are Plugins, not modules, so a gateway shouldn't refer the Gemini.

If something is `defined` in a gateway (such as a specific Exchange or Board, which has only a single instance), it can be exported, 
while if something is configued (for example, designations of parameters of MixMMRule to a Security), the gateway should refer 
the defination of MixMMRule, and publish the designated rule instance via context.

1. `ExecuteResult Connect()` and `ExecuteResult Close()`
2. `QueryAccounts()`
3. `QueryPositions()`  查询所有资金和持仓。 


- Security GetSecurity(string symbol)
- ExecuteResult Subscribe(string symbol)





# 获取证券信息
```
Security GetSecurity(string symbol)
```
vnpy： 异步 on_contract


| 柜台      | 是否同步   | 返回结果集    |
| --------- | --------- | ------------ |
| 恒生O32   | 同步      | 是            |
| 金证      | 同步或异步 | 否/是(收费版)  |
| 根网      | 同步或异步 | 否            |


## 恒生O32 同步，可以返回结果集

	功能号	30011	老功能号		更新日期	20170713
	功能名称	证券信息查询	版本号	20170630	结果集返回	Y
	英文名	func_am_stock_index_qry			请求类型	请求
	业务范围	证券			功能状态	公开
	功能描述	支持查询现货，期货，期权的证券资料信息。				
	输入参数	参数名	类型	说明	必须	备注
	user_token	C512	令牌号	Y	取登陆成功返回的令牌号。
	stock_type	C4	证券类型	N	参见数据字典25。
	market_no	C3	交易市场	N	参见数据字典4。
	stock_code	C20	证券代码	N	传入证券代码必须传入市场
	position_str	C32	定位串	N	定位串，默认传入0，查询时，返回大于传入定位串的记录。
	request_num	N8	请求数	N	默认1000,最大为10000。

## 金证 

1. 同步接口
```
[函数原型]
/**
   		 *证券信息查询
    		* @param[in] szCodes 证券代码集合，以"|"隔开 430002|430002,最大支持20只股票
    		* @param[out] stStkInfo 证券基础信息
    		* @param[out] iCount 查询到证券数量
   		* @param[in] iDataType 查找类型 0 - 做市 ，1 - 投资
    		* @return 调用LBM成功或失败
    */	
int GetStkInfo(const char* szCodes, STK_INFO_S* pstStkInfo, int* iCount, int iDataType = 0); 
[参数]
参数	参数含义	参数说明	参数类型	是否必填
szCodes	证券代码集合	以"|"隔开 430002|430002,最大支持20只股票	输入参数	是
pstStkInfo	证券基础信息		输出参数	是
iCount	查询到证券数量		输出参数	是
iDataType	查找类型	0 - 做市 ，1 - 投资	输入参数	否

[返回值]
0表示成功，非0表示失败
[示例]  
int iRet =  m_pLBM->GetStkInfo(szStkCode, &stStkInfo, &iCount);
  if (iRet != RTMSG_OK)
  {
    str = m_pLBM->GetLastError(1);
AfxMessageBox(str);
}

```

1. 单个股票, 异步
```

	[函数原型]
	/**
	* 获取股票基本信息
	* @param[in] szStkCode 股票代码
	* @return return 0: 成功，其它：错误码
	*/
		int GetNQInfo(char * pStkCode);
	[参数]
	参数	参数含义	参数说明	参数类型	是否必填
	pCode	股票代码		输入参数	是

	[返回值]
	0表示成功，非0表示失败
	[示例]
	m_pLBMPlugin->GetNQInfo(＂430029＂);
	//'430029'需是操作员所属的股票，后述请求中股票的赋值使用同样的原则

	调用前需设置股票基础信息回调函数，才能在回调函数中获取异步请求返回的数据，函数原型：
	/**
	* 设置股票基础信息回调函数
	* @param[in] hWnd句柄
	* @param[in] pNQInfoFun 股票基础信息回调函数
	*/
		void SetCallBackNQInfo(HWND hWnd, CALLBACK_NQINFO pNQInfoFun);
	[参数]
	参数	参数含义	参数说明	参数类型	是否必填
	hWnd	窗口句柄		输入参数	是
	pNQInfoFun 	股票基础信息回调函数		输入参数	是
	[返回值]
	无
	[示例]
	m_pLBMPlugin->SetCallBackNQInfo(this->GetSafeHwnd(), OnNQInfo);
```

2. 批量查询，同步（收费版)

```
[函数原型]
/**
   		 *证券信息查询
    		* @param[in] szCodes 证券代码集合，以"|"隔开 430002|430002,最大支持20只股票
    		* @param[out] stStkInfo 证券基础信息
    		* @param[out] iCount 查询到证券数量
   		* @param[in] iDataType 查找类型 0 - 做市 ，1 - 投资
    		* @return 调用LBM成功或失败
    */	
int GetStkInfo(const char* szCodes, STK_INFO_S* pstStkInfo, int* iCount, int iDataType = 0); 
[参数]
参数	参数含义	参数说明	参数类型	是否必填
szCodes	证券代码集合	以"|"隔开 430002|430002,最大支持20只股票	输入参数	是
pstStkInfo	证券基础信息		输出参数	是
iCount	查询到证券数量		输出参数	是
iDataType	查找类型	0 - 做市 ，1 - 投资	输入参数	否

[返回值]
0表示成功，非0表示失败
[示例]  
int iRet =  m_pLBM->GetStkInfo(szStkCode, &stStkInfo, &iCount);
  if (iRet != RTMSG_OK)
  {
    str = m_pLBM->GetLastError(1);
AfxMessageBox(str);
}

```

## 根网

1. python 

```
queryStkInfo(exchId, stkId, syncFlag=True)
行情查询

Parameters:	
exchId : 交易市场
stkId : 证券代码
syncFlag : 同步异步标志(默认为True) True-同步 False-异步
```
```
onQueryStkInfo(stkInfoData, msgRespond)
行情异步查询数据回调方法

Parameters:	
stkInfoData (CTSlib.ApiStruct.MsgStkInfo) –
msgRespond (CTSlib.ApiStruct.MsgRespond) –
```

# 订阅行情

ExecuteResult Subscribe(string symbol)
UnSubScribe

vnpy： 无返回: def subscribe(self, req: SubscribeRequest)


| 柜台      | 是否同步   | 返回结果集    |
| --------- | --------- | ------------ |
| 恒生O32   | 同步      | 是            |
| 金证      | 同步或异步 | 否/是(收费版)  |
| 根网      | 同步或异步 | 否            |


## 金证

- 订阅单个股票

```
[函数原型]
/**
* 订阅股票行情
* @param[in] pCode 股票代码
* @return return 0: 成功，其它：错误码
*/
	int SubScribe(char * pCode);
[参数]
参数	参数含义	参数说明	参数类型	是否必填
pCode	股票代码		输入参数	是
[返回值]
0表示成功，非0表示失败
[示例]
m_pLBMPlugin->SubScribe(＂430029＂);

调用前需设置行情回调函数，才能在回调函数中获取请求返回的数据，函数原型：
/**
* 设置行情回调函数
* @param[in] hWnd句柄
* @param[in] pNQTickFun 普通行情回调函数
* @param[in] pZSTickFun 做市行情回调函数
*/
	void SetCallBackHQFunction(HWND hWnd, CALLBACK_NQHQ pNQTickFun, CALLBACK_ZSHQ pZSTickFun);
[参数]
参数	参数含义	参数说明	参数类型	是否必填
hWnd	窗口句柄		输入参数	是
pNQTickFun 	普通行情回调函数		输入参数	是
pZSTickFun 	做市行情回调函数		输入参数	是
[返回值]
无

[示例]
m_pLBMPlugin->SetCallBackHQFunction(this->GetSafeHwnd(), OnNQTick, OnZSTick);

```

```
2.2.5 退订股票行情 
[函数原型]
/**
* 退订股票行情
* @param[in] pCode 股票代码
* @return return 0: 成功，其它：错误码
*/
int UnSubScribe(char * pCode);
[参数]
参数	参数含义	参数说明	参数类型	是否必填
pCode	股票代码		输入参数	是

[返回值]
0表示成功，非0表示失败
[示例]
m_pLBMPlugin->UnSubScribe(＂430029＂);

```

- 订阅多个股票(收费版)

```
[函数原型]
/**
	* 订阅股票行情
	* @param[in] pCode 单支股票代码，KSMMApi会把已订阅的所有股票行情按＂CODEITEM＂的值分批次返回，每次返回＂CODEITEM＂个股票的行情
	* @return return 0: 成功，其它：错误码
	*/
	int SubScribe_Codes(char * pCode);

[参数]
参数	参数含义	参数说明	参数类型	是否必填
pCodeList	股票代码列表	多只股票中间以'|'分隔	输入参数	是

[返回值]
0表示成功，非0表示失败
[示例]
m_pLBMPlugin->SubScribe_Codes(＂430029＂);

调用前需设置多支股票的行情回调函数，才能在回调函数中获取异步请求返回的数据，函数原型：
/**
	* 设置查询多支股票的行情回调函数
	* @param[in] hWnd句柄
	* @param[in] pNQTickFun 普通行情回调函数
	* @param[in] pZSTickFun 做市行情回调函数
	*/
	void SetCallBackHQCodesFunction(HWND hWnd, CALLBACK_NQHQ_CODES pNQTickFun, CALLBACK_ZSHQ_CODES pZSTickFun);
[参数]
参数	参数含义	参数说明	参数类型	是否必填
hWnd	窗口句柄		输入参数	是
pNQInfoFun 	普通行情回调函数		输入参数	是
pZSTickFun 	做市行情回调函数		输入参数	是
[返回值]
无
[示例]
m_pLBMPlugin->SetCallBackHQCodesFunction(this->GetSafeHwnd(), OnNQCodesTick,OnZSCodesTick);

```

```
[函数原型]
/**
	* 退订股票行情
	* @param[in] pCode 单支股票代码
	* @return return 0: 成功，其它：错误码
	*/
	int UnSubScribe_Codes(char * pCode);
[参数]
参数	参数含义	参数说明	参数类型	是否必填
pCodeList	股票代码列表	多只股票中间以'|'分隔	输入参数	是

[返回值]
0表示成功，非0表示失败
[示例]
m_pLBMPlugin->UnSubScribe_Codes(＂430029＂);

```

## 恒生O32

无行情

## 根网

```
classCTSlib.ApiStruct.SubQuotaContent(exchId, stkId)
Bases: object

行情订阅

Fieldmembers:	
exchId : 市场
stkId : 证券代码
```